<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥æ’ä¾¿è®°å½• - å¥åº·ç”Ÿæ´»çš„ç‚¹æ»´</title>
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            scroll-behavior: smooth;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .loader {
            animation: fadeIn 0.5s ease-in;
        }
        
        .page-transition {
            opacity: 0;
            animation: fadeIn 0.8s ease-in forwards;
            animation-delay: 0.2s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .hover-scale {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        .loading-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }
        
        /* Bristolå¤§ä¾¿åˆ†ç±»å›¾ç¤ºæ ·å¼ */
        .bristol-types {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 16px;
        }
        
        .bristol-item {
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.2s ease;
        }
        
        .stool-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            background-color: #fff;
            color: #1f2937;
        }
        
        .dark .form-control {
            background-color: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 0.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 640px) {
            .bristol-types {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }
    </style>
    <script>
        // å®šä¹‰Tailwindæš—æ¨¡å¼é…ç½®
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#6b7280'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 min-h-screen">
    <!-- åŠ è½½åŠ¨ç”» -->
    <div id="loading" class="loading-wrapper bg-gray-50 dark:bg-gray-900">
        <div class="text-center max-w-lg mx-auto px-4">
            <div class="mb-6">
                <svg class="animate-spin mx-auto h-12 w-12 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </div>
            <h2 id="current-date" class="text-2xl font-bold mb-4"></h2>
            <blockquote class="border-l-4 border-blue-500 pl-4 italic">
                <p id="quote" class="text-lg mb-2"></p>
                <footer id="quote-source" class="text-sm text-gray-600 dark:text-gray-400"></footer>
            </blockquote>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div id="main-content" class="hidden">
        <!-- å¯¼èˆªæ  -->
        <header class="bg-white dark:bg-gray-800 shadow-sm">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <i class="fas fa-toilet text-blue-600 text-2xl mr-3"></i>
                        <h1 class="text-xl font-bold">æ¯æ—¥æ’ä¾¿è®°å½•</h1>
                    </div>
                    <div>
                        <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                            <i class="fas fa-moon dark:hidden"></i>
                            <i class="fas fa-sun hidden dark:block"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- å†…å®¹åŒºåŸŸ -->
        <main class="container mx-auto px-4 py-8">
            <!-- ç»Ÿè®¡æ‘˜è¦å¡ç‰‡ -->
            <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 hover-scale">
                    <div class="flex items-center">
                        <div class="bg-blue-100 dark:bg-blue-900 rounded-full p-3 mr-4">
                            <i class="fas fa-calendar-check text-blue-600 dark:text-blue-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm text-gray-600 dark:text-gray-400">æœ¬å‘¨è®°å½•</h3>
                            <p class="text-2xl font-bold">0/7</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                <i class="fas fa-minus"></i> å°šæ— æ•°æ®
                            </p>
                        </div>
                    </div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 hover-scale">
                    <div class="flex items-center">
                        <div class="bg-purple-100 dark:bg-purple-900 rounded-full p-3 mr-4">
                            <i class="fas fa-clock text-purple-600 dark:text-purple-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm text-gray-600 dark:text-gray-400">å¹³å‡æ—¶é•¿</h3>
                            <p class="text-2xl font-bold">--</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                <i class="fas fa-minus"></i> å°šæ— æ•°æ®
                            </p>
                        </div>
                    </div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 hover-scale">
                    <div class="flex items-center">
                        <div class="bg-amber-100 dark:bg-amber-900 rounded-full p-3 mr-4">
                            <i class="fas fa-chart-line text-amber-600 dark:text-amber-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm text-gray-600 dark:text-gray-400">å¹³å‡å¸ƒé‡Œæ–¯æ‰˜è¯„åˆ†</h3>
                            <p class="text-2xl font-bold">--</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                <i class="fas fa-minus"></i> å°šæ— æ•°æ®
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- å›¾è¡¨åˆ†æ -->
            <section class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8">
                <h2 class="text-xl font-bold mb-4">è¿‘æœŸè¶‹åŠ¿åˆ†æ</h2>
                <div id="no-chart-data" class="flex flex-col items-center justify-center py-16">
                    <i class="fas fa-chart-area text-gray-300 dark:text-gray-700 text-5xl mb-4"></i>
                    <p class="text-gray-500 dark:text-gray-400">å°šæ— æ•°æ®å¯ä¾›åˆ†æï¼Œè¯·æ·»åŠ æ’ä¾¿è®°å½•</p>
                </div>
                <div id="chart-container" class="h-80 hidden">
                    <canvas id="trends-chart"></canvas>
                </div>
            </section>

            <!-- å¸ƒé‡Œæ–¯æ‰˜å¤§ä¾¿åˆ†ç±»è¡¨ -->
            <section class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8">
                <h2 class="text-xl font-bold mb-4">å¸ƒé‡Œæ–¯æ‰˜å¤§ä¾¿åˆ†ç±»è¡¨</h2>
                <p class="text-gray-600 dark:text-gray-400 mb-4">å¸ƒé‡Œæ–¯æ‰˜å¤§ä¾¿åˆ†ç±»è¡¨(Bristol Stool Chart)æ˜¯åŒ»å­¦ä¸Šç”¨äºåˆ†ç±»äººç±»ç²ªä¾¿å½¢æ€çš„è¯Šæ–­æ€§åŒ»ç–—å·¥å…·</p>
                
                <div class="bristol-types mt-6 mb-4">
              <div class="bristol-types mt-6 mb-4">
    <!-- å¸ƒé‡Œæ–¯æ‰˜7ç§ç±»å‹ -->
    <div class="bristol-item bg-gray-100 dark:bg-gray-700 p-4 text-center hover-scale">
        <div class="stool-icon text-amber-800">
            <i class="fas fa-circle"></i><i class="fas fa-circle"></i>
        </div>
        <div class="font-bold mb-1">ç¡¬å—çŠ¶</div>
        <div class="text-sm">å¦‚åšæœ</div>
    </div>
    <div class="bristol-item bg-gray-100 dark:bg-gray-700 p-4 text-center hover-scale">
        <div class="stool-icon text-amber-700">
            <i class="fas fa-pills fa-rotate-90"></i>
        </div>
        <div class="font-bold mb-1">ç»“å—çŠ¶</div>
        <div class="text-sm">æ¡çŠ¶ä½†æœ‰ç»“å—</div>
    </div>
    <div class="bristol-item bg-gray-100 dark:bg-gray-700 p-4 text-center hover-scale">
        <div class="stool-icon text-amber-600">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                <path d="M6,12 C6,9 8,8 12,8 C16,8 18,9 18,12 C18,15 16,16 12,16 C8,16 6,15 6,12 Z"></path>
            </svg>
        </div>
        <div class="font-bold mb-1">è£‚çº¹çŠ¶</div>
        <div class="text-sm">æ¡çŠ¶æœ‰è£‚çº¹</div>
    </div>
    <div class="bristol-item bg-gray-100 dark:bg-gray-700 p-4 text-center hover-scale">
        <div class="stool-icon text-amber-500">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                <path d="M5,12 C5,9 8,7 12,7 C16,7 19,9 19,12 C19,15 16,17 12,17 C8,17 5,15 5,12 Z"></path>
            </svg>
        </div>
        <div class="font-bold mb-1">å…‰æ»‘æ¡çŠ¶</div>
        <div class="text-sm">æ¡çŠ¶å…‰æ»‘(æœ€ç†æƒ³)</div>
    </div>
    <div class="bristol-item bg-gray-100 dark:bg-gray-700 p-4 text-center hover-scale">
        <div class="stool-icon text-amber-500">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                <path d="M7,10 C7,8.5 9,7 12,7 C15,7 17,8.5 17,10 C17,11.5 15,13 12,13 C9,13 7,11.5 7,10 Z"></path>
                <path d="M9,14 C9,12.5 10,12 12,12 C14,12 15,12.5 15,14 C15,15.5 14,16 12,16 C10,16 9,15.5 9,14 Z"></path>
            </svg>
        </div>
        <div class="font-bold mb-1">è½¯å—çŠ¶</div>
        <div class="text-sm">è½¯å—çŠ¶æœ‰æ¸…æ™°è¾¹ç¼˜</div>
    </div>
    <div class="bristol-item bg-gray-100 dark:bg-gray-700 p-4 text-center hover-scale">
        <div class="stool-icon text-amber-400">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                <path d="M6,10 C6,8 9,7 12,7 C15,7 18,8 18,10 C18,10.5 17.5,11 16.5,11.5 C17.5,12 18,12.5 18,13 C18,15 15,16 12,16 C9,16 6,15 6,13 C6,12.5 6.5,12 7.5,11.5 C6.5,11 6,10.5 6,10 Z"></path>
            </svg>
        </div>
        <div class="font-bold mb-1">ç³ŠçŠ¶</div>
        <div class="text-sm">ç³ŠçŠ¶è½¯ä¾¿ï¼Œè¾¹ç¼˜ä¸è§„åˆ™</div>
    </div>
    <div class="bristol-item bg-gray-100 dark:bg-gray-700 p-4 text-center hover-scale">
        <div class="stool-icon text-amber-300">
            <i class="fas fa-water"></i>
        </div>
        <div class="font-bold mb-1">æ°´çŠ¶</div>
        <div class="text-sm">å…¨æ¶²æ€ï¼Œæ— å›ºä½“</div>
    </div>
</div>

            </section>

            <!-- æœ€è¿‘è®°å½• -->
            <section class="mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold">æœ€è¿‘è®°å½•</h2>
                    <button id="add-record-btn" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center hover-scale">
                        <i class="fas fa-plus mr-2"></i> æ–°å¢è®°å½•
                    </button>
                </div>
                
                <!-- ç©ºè®°å½•çŠ¶æ€ -->
                <div id="empty-records" class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-10 text-center">
                    <div class="flex flex-col items-center">
                        <i class="fas fa-toilet-paper text-gray-300 dark:text-gray-700 text-6xl mb-4"></i>
                        <h3 class="text-xl font-medium mb-2">æš‚æ— æ’ä¾¿è®°å½•</h3>
                        <p class="text-gray-500 dark:text-gray-400 mb-6">ç‚¹å‡»"æ–°å¢è®°å½•"æŒ‰é’®å¼€å§‹è®°å½•æ‚¨çš„æ’ä¾¿æƒ…å†µ</p>
                        <button class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-lg flex items-center hover-scale" onclick="document.getElementById('add-record-btn').click()">
                            <i class="fas fa-plus mr-2"></i> å¼€å§‹è®°å½•
                        </button>
                    </div>
                </div>
                
                <!-- è®°å½•åˆ—è¡¨ (åˆå§‹ä¸ºç©º) -->
                <div id="records-list" class="space-y-4 hidden">
                    <!-- è®°å½•é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
                </div>
            </section>
        </main>

        <!-- é¡µè„š -->
        <footer class="bg-white dark:bg-gray-800 py-8 mt-8 border-t border-gray-200 dark:border-gray-700">
            <div class="container mx-auto px-4">
                <div class="text-center sm:text-left flex flex-col sm:flex-row justify-between items-center">
                    <div class="mb-4 sm:mb-0">
                        <p class="text-gray-600 dark:text-gray-400">&copy; <span id="current-year"></span> å¼ ä¸‰ ç‰ˆæƒæ‰€æœ‰</p>
                        <p class="text-sm text-gray-500 dark:text-gray-500 mt-1">å¥åº·è®°å½•ï¼Œåªä¸ºæ›´å¥½çš„ç”Ÿæ´»</p>
                    </div>
                    <div class="flex gap-4">
                        <a href="https://github.com/username" target="_blank" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400">
                            <i class="fab fa-github text-xl"></i>
                        </a>
                        <a href="https://twitter.com/username" target="_blank" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="https://linkedin.com/in/username" target="_blank" class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400">
                            <i class="fab fa-linkedin text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- æ–°å¢è®°å½•æ¨¡æ€æ¡† -->
    <div id="add-record-modal" class="modal">
        <div class="modal-content bg-white dark:bg-gray-800 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">æ–°å¢æ’ä¾¿è®°å½•</h3>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="record-form" class="mt-4">
                <div class="form-group">
                    <label class="form-label" for="record-date">æ—¥æœŸæ—¶é—´</label>
                    <input type="datetime-local" id="record-date" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="record-duration">æŒç»­æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</label>
                    <input type="number" id="record-duration" class="form-control" min="1" max="60" required>
                </div>
                
                <div class="form-group">
              <div class="form-group">
    <label class="form-label">å¤§ä¾¿ç±»å‹ï¼ˆå¸ƒé‡Œæ–¯æ‰˜é‡è¡¨ï¼‰</label>
    <div class="grid grid-cols-4 gap-2">
        <label class="cursor-pointer">
            <input type="radio" name="bristol-type" value="1" class="sr-only" required>
            <div class="border-2 border-transparent hover:border-blue-500 p-2 rounded-md text-center bg-gray-100 dark:bg-gray-700">
                <div class="text-amber-800 text-2xl">
                    <i class="fas fa-circle"></i><i class="fas fa-circle"></i>
                </div>
                <span class="block mt-1 text-xs">ç¡¬å—çŠ¶</span>
            </div>
        </label>
        <label class="cursor-pointer">
            <input type="radio" name="bristol-type" value="2" class="sr-only">
            <div class="border-2 border-transparent hover:border-blue-500 p-2 rounded-md text-center bg-gray-100 dark:bg-gray-700">
                <div class="text-amber-700 text-2xl">
                    <i class="fas fa-pills fa-rotate-90"></i>
                </div>
                <span class="block mt-1 text-xs">ç»“å—çŠ¶</span>
            </div>
        </label>
        <label class="cursor-pointer">
            <input type="radio" name="bristol-type" value="3" class="sr-only">
            <div class="border-2 border-transparent hover:border-blue-500 p-2 rounded-md text-center bg-gray-100 dark:bg-gray-700">
                <div class="text-amber-600 text-2xl">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                        <path d="M6,12 C6,9 8,8 12,8 C16,8 18,9 18,12 C18,15 16,16 12,16 C8,16 6,15 6,12 Z"></path>
                    </svg>
                </div>
                <span class="block mt-1 text-xs">è£‚çº¹çŠ¶</span>
            </div>
        </label>
        <label class="cursor-pointer">
            <input type="radio" name="bristol-type" value="4" class="sr-only">
            <div class="border-2 border-transparent hover:border-blue-500 p-2 rounded-md text-center bg-gray-100 dark:bg-gray-700">
                <div class="text-amber-500 text-2xl">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                        <path d="M5,12 C5,9 8,7 12,7 C16,7 19,9 19,12 C19,15 16,17 12,17 C8,17 5,15 5,12 Z"></path>
                    </svg>
                </div>
                <span class="block mt-1 text-xs">å…‰æ»‘æ¡çŠ¶</span>
            </div>
        </label>
        <label class="cursor-pointer">
            <input type="radio" name="bristol-type" value="5" class="sr-only">
            <div class="border-2 border-transparent hover:border-blue-500 p-2 rounded-md text-center bg-gray-100 dark:bg-gray-700">
                <div class="text-amber-500 text-2xl">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                        <path d="M7,10 C7,8.5 9,7 12,7 C15,7 17,8.5 17,10 C17,11.5 15,13 12,13 C9,13 7,11.5 7,10 Z"></path>
                        <path d="M9,14 C9,12.5 10,12 12,12 C14,12 15,12.5 15,14 C15,15.5 14,16 12,16 C10,16 9,15.5 9,14 Z"></path>
                    </svg>
                </div>
                <span class="block mt-1 text-xs">è½¯å—çŠ¶</span>
            </div>
        </label>
        <label class="cursor-pointer">
            <input type="radio" name="bristol-type" value="6" class="sr-only">
            <div class="border-2 border-transparent hover:border-blue-500 p-2 rounded-md text-center bg-gray-100 dark:bg-gray-700">
                <div class="text-amber-400 text-2xl">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="mx-auto">
                        <path d="M6,10 C6,8 9,7 12,7 C15,7 18,8 18,10 C18,10.5 17.5,11 16.5,11.5 C17.5,12 18,12.5 18,13 C18,15 15,16 12,16 C9,16 6,15 6,13 C6,12.5 6.5,12 7.5,11.5 C6.5,11 6,10.5 6,10 Z"></path>
                    </svg>
                </div>
                <span class="block mt-1 text-xs">ç³ŠçŠ¶</span>
            </div>
        </label>
        <label class="cursor-pointer">
            <input type="radio" name="bristol-type" value="7" class="sr-only">
            <div class="border-2 border-transparent hover:border-blue-500 p-2 rounded-md text-center bg-gray-100 dark:bg-gray-700">
                <div class="text-amber-300 text-2xl">
                    <i class="fas fa-water"></i>
                </div>
                <span class="block mt-1 text-xs">æ°´çŠ¶</span>
            </div>
        </label>
    </div>
</div>
                
                <div class="form-group">
                    <label class="form-label" for="record-hardness">ç¡¬åº¦</label>
                    <select id="record-hardness" class="form-control" required>
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="å¾ˆç¡¬">å¾ˆç¡¬</option>
                        <option value="è¾ƒç¡¬">è¾ƒç¡¬</option>
                        <option value="é€‚ä¸­">é€‚ä¸­</option>
                        <option value="è¾ƒè½¯">è¾ƒè½¯</option>
                        <option value="å¾ˆè½¯">å¾ˆè½¯</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="record-mood">å¿ƒæƒ…</label>
                    <select id="record-mood" class="form-control" required>
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="å¾ˆæ„‰å¿«">å¾ˆæ„‰å¿« ğŸ˜„</option>
                        <option value="æ„‰å¿«">æ„‰å¿« ğŸ™‚</option>
                        <option value="ä¸€èˆ¬">ä¸€èˆ¬ ğŸ˜</option>
                        <option value="ä¸é€‚">ä¸é€‚ ğŸ™</option>
                        <option value="å¾ˆä¸é€‚">å¾ˆä¸é€‚ ğŸ˜–</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="record-notes">å¤‡æ³¨</label>
                    <textarea id="record-notes" class="form-control" rows="3" placeholder="æ·»åŠ é¢å¤–è¯´æ˜..."></textarea>
                </div>
                
                <div class="mt-6 flex justify-end">
                    <button type="button" id="cancel-record" class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg mr-2">å–æ¶ˆ</button>
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">ä¿å­˜è®°å½•</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°
        function formatDate(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            return `${year}å¹´${month}æœˆ${day}æ—¥`;
        }

        function formatDateTime(dateObj) {
            const year = dateObj.getFullYear();
            const month = dateObj.getMonth() + 1;
            const day = dateObj.getDate();
            const hours = dateObj.getHours().toString().padStart(2, '0');
            const minutes = dateObj.getMinutes().toString().padStart(2, '0');
            
            return `${year}å¹´${month}æœˆ${day}æ—¥ ${hours}:${minutes}`;
        }

        // å¸ƒé‡Œæ–¯æ‰˜å¤§ä¾¿ç±»å‹å›¾æ ‡è·å–å‡½æ•°
// è·å–å¸ƒé‡Œæ–¯æ‰˜ç±»å‹åç§°å‡½æ•°
function getBristolTypeName(type) {
    switch(parseInt(type)) {
        case 1: return 'ç¡¬å—çŠ¶';
        case 2: return 'ç»“å—çŠ¶';
        case 3: return 'è£‚çº¹çŠ¶';
        case 4: return 'å…‰æ»‘æ¡çŠ¶';
        case 5: return 'è½¯å—çŠ¶';
        case 6: return 'ç³ŠçŠ¶';
        case 7: return 'æ°´çŠ¶';
        default: return 'æœªçŸ¥ç±»å‹';
    }
}

        // è·å–å¿ƒæƒ…è¡¨æƒ…å‡½æ•°
        function getMoodIcon(mood) {
            switch(mood) {
                case 'å¾ˆæ„‰å¿«':
                    return '<i class="far fa-grin text-green-500"></i>';
                case 'æ„‰å¿«':
                    return '<i class="far fa-smile text-green-400"></i>';
                case 'ä¸€èˆ¬':
                    return '<i class="far fa-meh text-yellow-500"></i>';
                case 'ä¸é€‚':
                    return '<i class="far fa-frown text-orange-500"></i>';
                case 'å¾ˆä¸é€‚':
                    return '<i class="far fa-dizzy text-red-500"></i>';
                default:
                    return '<i class="far fa-question-circle text-gray-400"></i>';
            }
        }

        // æ•°æ®å­˜å‚¨
        let records = [];
        const storedRecords = localStorage.getItem('poop-records');
        if (storedRecords) {
            try {
                records = JSON.parse(storedRecords);
                // è½¬æ¢å­—ç¬¦ä¸²æ—¥æœŸä¸ºDateå¯¹è±¡
                records.forEach(record => {
                    record.date = new Date(record.date);
                });
            } catch (e) {
                console.error("Failed to parse stored records:", e);
                records = [];
            }
        }

        // å½“é¡µé¢åŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ—¥æœŸæ˜¾ç¤º
            const today = new Date();
            document.getElementById('current-date').textContent = `ä»Šå¤©æ˜¯${formatDate(today)}`;
            document.getElementById('current-year').textContent = today.getFullYear();
            
            // é»˜è®¤å¡«å…¥å½“å‰æ—¥æœŸæ—¶é—´
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('record-date').value = now.toISOString().slice(0, 16);
            
            // æ¨¡æ‹Ÿåäººåè¨€API (å®é™…åº”ç”¨ä¸­åº”æ›¿æ¢ä¸ºçœŸå®API)
            const quotes = [
                {
                    text: "ä¾¿ä¾¿æ˜¯èº«ä½“çš„è¯­è¨€ï¼Œå®ƒè¯‰è¯´ç€ä½ å†…å¿ƒæœ€æ·±å¤„çš„ç§˜å¯†ã€‚",
                    source: "ã€Šè‚ é“çš„ç§˜å¯†ã€‹ï¼Œæœ±åˆ©å®‰Â·ç‰¹é²å°”"
                },
                {
                    text: "äººä¸åŠ¨ç‰©çš„åŒºåˆ«åœ¨äºï¼Œäººç±»ä¼šæ€è€ƒè‡ªå·±çš„æ’æ³„ç‰©ï¼Œå¹¶ä»ä¸­å¯»æ‰¾å¥åº·çš„ç­”æ¡ˆã€‚",
                    source: "ã€Šè‚ é“å¥åº·ä¸å…ç–«ã€‹ï¼ŒåŸƒé»˜å…°Â·è¿ˆè€¶"
                },
                {
                    text: "å¦‚å•æ—¶é—´æ˜¯äººç±»ä¸ºæ•°ä¸å¤šèƒ½å¤Ÿç‹¬å¤„å¹¶ä¸è‡ªå·±å¯¹è¯çš„æ—¶åˆ»ã€‚",
                    source: "ã€Šæ€è€ƒçš„è‰ºæœ¯ã€‹ï¼Œææ¬§çº³å¤šÂ·è¾¾Â·èŠ¬å¥‡"
                },
                {
                    text: "æ¯ä¸€æ¬¡æ’ä¾¿éƒ½æ˜¯èº«ä½“è¿›è¡Œè‡ªæˆ‘æ¸…ç†çš„ä»ªå¼ï¼Œå€¼å¾—å°Šé‡å’Œå…³æ³¨ã€‚",
                    source: "ã€Šèº«ä½“çš„æ™ºæ…§ã€‹ï¼Œè¿ˆå…‹å°”Â·æ³¢å…°"
                },
                {
                    text: "è§‚å¯Ÿä½ çš„æ’æ³„ç‰©ï¼Œæ˜¯ç†è§£è‡ªå·±å¥åº·çŠ¶å†µçš„ç¬¬ä¸€æ­¥ã€‚",
                    source: "ã€Šç”Ÿæ´»ä¸­çš„åŒ»å­¦ã€‹ï¼Œå®‰å¾·é²Â·å¨å°”"
                }
            ];
            
            // éšæœºé€‰æ‹©ä¸€æ¡åè¨€
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('quote').textContent = randomQuote.text;
            document.getElementById('quote-source').textContent = randomQuote.source;
            
            // è®¾ç½®å®šæ—¶å™¨ï¼Œ3ç§’åéšè—åŠ è½½é¡µé¢ï¼Œæ˜¾ç¤ºä¸»å†…å®¹
            setTimeout(function() {
                document.getElementById('loading').classList.add('opacity-0');
                setTimeout(function() {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('main-content').classList.remove('hidden');
                    document.getElementById('main-content').classList.add('page-transition');
                    
                    // æ›´æ–°UIä»¥æ˜¾ç¤ºè®°å½•
                    updateUI();
                }, 500);
            }, 3000);
            
            // æ·±è‰²æ¨¡å¼åˆ‡æ¢
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', function() {
                document.documentElement.classList.toggle('dark');
            });
            
            // æ£€æŸ¥ç³»ç»Ÿåå¥½å¹¶åº”ç”¨
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
            
            // æ¨¡æ€æ¡†å¤„ç†
            const modal = document.getElementById('add-record-modal');
            const addRecordBtn = document.getElementById('add-record-btn');
            const closeModalBtn = document.getElementById('close-modal');
            const cancelBtn = document.getElementById('cancel-record');
            const recordForm = document.getElementById('record-form');
            
            // æ‰“å¼€æ¨¡æ€æ¡†
            addRecordBtn.addEventListener('click', function() {
                modal.classList.add('show');
            });
            
            // å…³é—­æ¨¡æ€æ¡†
            function closeModal() {
                modal.classList.remove('show');
            }
            
            closeModalBtn.addEventListener('click', closeModal);
            cancelBtn.addEventListener('click', closeModal);
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            modal.addEventListener('click', function(event) {
                if (event.target === modal) {
                    closeModal();
                }
            });
            
            // æäº¤è¡¨å•
            recordForm.addEventListener('submit', function(event) {
                event.preventDefault();
                
                // æ”¶é›†è¡¨å•æ•°æ®
                const dateInput = document.getElementById('record-date').value;
                const duration = document.getElementById('record-duration').value;
                const bristolType = document.querySelector('input[name="bristol-type"]:checked').value;
                const hardness = document.getElementById('record-hardness').value;
                const mood = document.getElementById('record-mood').value;
                const notes = document.getElementById('record-notes').value;
                
                // åˆ›å»ºè®°å½•å¯¹è±¡
                const newRecord = {
                    id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
                    date: new Date(dateInput),
                    duration: parseInt(duration),
                    bristolType: parseInt(bristolType),
                    hardness: hardness,
                    mood: mood,
                    notes: notes
                };
                
                // æ·»åŠ åˆ°è®°å½•ä¸­
                records.push(newRecord);
                
                // æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€è¿‘çš„åœ¨å‰é¢ï¼‰
                records.sort((a, b) => b.date - a.date);
                
                // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                localStorage.setItem('poop-records', JSON.stringify(records));
                
                // æ›´æ–°UI
                updateUI();
                
                // å…³é—­æ¨¡æ€æ¡†
                closeModal();
                
                // é‡ç½®è¡¨å•
                recordForm.reset();
                
                // é‡æ–°è®¾ç½®é»˜è®¤æ—¥æœŸæ—¶é—´
                const now = new Date();
                now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
                document.getElementById('record-date').value = now.toISOString().slice(0, 16);
            });
        });
        
        // æ›´æ–°UIå‡½æ•°
        function updateUI() {
            const emptyRecordsEl = document.getElementById('empty-records');
            const recordsListEl = document.getElementById('records-list');
            const noChartDataEl = document.getElementById('no-chart-data');
            const chartContainerEl = document.getElementById('chart-container');
            
            // æ£€æŸ¥æ˜¯å¦æœ‰è®°å½•
            if (records.length === 0) {
                emptyRecordsEl.classList.remove('hidden');
                recordsListEl.classList.add('hidden');
                noChartDataEl.classList.remove('hidden');
                chartContainerEl.classList.add('hidden');
                return;
            }
            
            // æœ‰è®°å½•ï¼Œæ›´æ–°UI
            emptyRecordsEl.classList.add('hidden');
            recordsListEl.classList.remove('hidden');
            noChartDataEl.classList.add('hidden');
            chartContainerEl.classList.remove('hidden');
            
            // ç”Ÿæˆè®°å½•åˆ—è¡¨HTML
            recordsListEl.innerHTML = '';
            
            records.forEach(record => {
                const recordEl = document.createElement('div');
                recordEl.className = 'bg-white dark:bg-gray-800 rounded-xl shadow-md p-5 hover-scale';
                recordEl.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h3 class="font-bold">${formatDateTime(record.date)}</h3>
                            <span class="inline-block text-xs px-2 py-1 rounded-full mt-1 bg-gray-100 dark:bg-gray-700">
                                ${getMoodIcon(record.mood)} ${record.mood}
                            </span>
                        </div>
                        <span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs px-2 py-1 rounded-full">æ—¶é•¿: ${record.duration}åˆ†é’Ÿ</span>
                    </div>
                    <div class="flex flex-wrap gap-4 mb-2">
                        <div class="flex items-center">
                            <span class="text-gray-600 dark:text-gray-400 text-sm">å½¢çŠ¶ï¼š</span>
                            <span class="font-medium flex items-center">
                                <span class="mr-1">ç±»å‹${record.bristolType}</span>
                                <span class="inline-block">${getBristolTypeIcon(record.bristolType)}</span>
                            </span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-gray-600 dark:text-gray-400 text-sm">ç¡¬åº¦ï¼š</span>
                            <span class="font-medium">${record.hardness}</span>
                        </div>
                    </div>
                    ${record.notes ? `<p class="text-gray-600 dark:text-gray-400 text-sm">å¤‡æ³¨ï¼š${record.notes}</p>` : ''}
                `;
                
                recordsListEl.appendChild(recordEl);
            });
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateStats();
            
            // åˆå§‹åŒ–å›¾è¡¨
            initChart();
        }
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            // è·å–å½“å‰æ—¥æœŸ
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // è®¡ç®—ä¸€å‘¨å‰çš„æ—¥æœŸ
            const oneWeekAgo = new Date(today);
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            
            // è¿‡æ»¤å‡ºæœ¬å‘¨çš„è®°å½•
            const thisWeekRecords = records.filter(record => {
                const recordDate = new Date(record.date);
                recordDate.setHours(0, 0, 0, 0);
                return recordDate >= oneWeekAgo && recordDate <= today;
            });
            
            // æ›´æ–°æœ¬å‘¨è®°å½•æ•°
            const weeklyRecordsEl = document.querySelector('.container .grid.grid-cols-1.md\\:grid-cols-3 > div:nth-child(1) p.text-2xl');
            if (weeklyRecordsEl) {
                weeklyRecordsEl.textContent = `${thisWeekRecords.length}/7`;
                
                const weeklyRecordsStatusEl = weeklyRecordsEl.nextElementSibling;
                if (thisWeekRecords.length > 0) {
                    weeklyRecordsStatusEl.innerHTML = `<i class="fas fa-check"></i> å·²è®°å½•`;
                    weeklyRecordsStatusEl.className = 'text-xs text-green-600 dark:text-green-400 mt-1';
                } else {
                    weeklyRecordsStatusEl.innerHTML = `<i class="fas fa-minus"></i> å°šæ— æ•°æ®`;
                    weeklyRecordsStatusEl.className = 'text-xs text-gray-500 dark:text-gray-400 mt-1';
                }
            }
            
            // æ›´æ–°å¹³å‡æ—¶é•¿
            const durationEl = document.querySelector('.container .grid.grid-cols-1.md\\:grid-cols-3 > div:nth-child(2) p.text-2xl');
            if (durationEl && records.length > 0) {
                const avgDuration = records.reduce((sum, record) => sum + record.duration, 0) / records.length;
                durationEl.textContent = `${avgDuration.toFixed(1)}åˆ†é’Ÿ`;
                
                const durationStatusEl = durationEl.nextElementSibling;
                durationStatusEl.innerHTML = `<i class="fas fa-check"></i> å·²è®°å½•`;
                durationStatusEl.className = 'text-xs text-green-600 dark:text-green-400 mt-1';
            }
            
            // æ›´æ–°å¸ƒé‡Œæ–¯æ‰˜è¯„åˆ†
            const bristolEl = document.querySelector('.container .grid.grid-cols-1.md\\:grid-cols-3 > div:nth-child(3) p.text-2xl');
            if (bristolEl && records.length > 0) {
                const avgBristol = records.reduce((sum, record) => sum + record.bristolType, 0) / records.length;
                bristolEl.textContent = avgBristol.toFixed(1);
                
                const bristolStatusEl = bristolEl.nextElementSibling;
                if (avgBristol >= 3 && avgBristol <= 5) {
                    bristolStatusEl.innerHTML = `<i class="fas fa-check"></i> å¥åº·èŒƒå›´å†…`;
                    bristolStatusEl.className = 'text-xs text-green-600 dark:text-green-400 mt-1';
                } else {
                    bristolStatusEl.innerHTML = `<i class="fas fa-exclamation-circle"></i> éç†æƒ³èŒƒå›´`;
                    bristolStatusEl.className = 'text-xs text-orange-600 dark:text-orange-400 mt-1';
                }
            }
        }
        
        // åˆå§‹åŒ–å›¾è¡¨
        function initChart() {
            if (records.length === 0) return;
            
            const ctx = document.getElementById('trends-chart').getContext('2d');
            
            // æ¸…é™¤ä»»ä½•ç°æœ‰å›¾è¡¨
            if (window.myChart) {
                window.myChart.destroy();
            }
            
            const isDark = document.documentElement.classList.contains('dark');
            const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            const textColor = isDark ? '#9ca3af' : '#6b7280';
            
            // å‡†å¤‡å›¾è¡¨æ•°æ®
            const sortedRecords = [...records].sort((a, b) => a.date - b.date);
            const lastRecords = sortedRecords.slice(-7); // è·å–æœ€è¿‘7æ¡è®°å½•
            
            const labels = lastRecords.map(record => {
                const date = new Date(record.date);
                return `${date.getMonth() + 1}/${date.getDate()}`;
            });
            
            const bristolData = lastRecords.map(record => record.bristolType);
            const durationData = lastRecords.map(record => record.duration);
            
            window.myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'å¸ƒé‡Œæ–¯æ‰˜è¯„åˆ†',
                            data: bristolData,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'æ’ä¾¿æ—¶é•¿(åˆ†é’Ÿ)',
                            data: durationData,
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.3,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: textColor
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: gridColor
                            },
                            ticks: {
                                color: textColor
                            }
                        },
                        y: {
                            grid: {
                                color: gridColor
                            },
                            ticks: {
                                color: textColor
                            },
                            min: 0,
                            max: 10
                        }
                    }
                }
            });
        }

        // ä¸ºå¸ƒé‡Œæ–¯æ‰˜ç±»å‹é€‰æ‹©æ·»åŠ é«˜äº®æ•ˆæœ
        document.querySelectorAll('input[name="bristol-type"]').forEach(input => {
            input.addEventListener('change', function() {
                // ç§»é™¤æ‰€æœ‰é€‰ä¸­æ ·å¼
                document.querySelectorAll('input[name="bristol-type"] + div').forEach(div => {
                    div.classList.remove('border-blue-500');
                    div.classList.add('border-transparent');
                });
                
                // æ·»åŠ é€‰ä¸­æ ·å¼
                if (this.checked) {
                    this.nextElementSibling.classList.remove('border-transparent');
                    this.nextElementSibling.classList.add('border-blue-500');
                }
            });
        });
    </script>
</body>
</html>
